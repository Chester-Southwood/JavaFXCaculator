Demo version of code. Major refactoring is necessary for much cleaner code.